---
// src/layouts/Layout.astro
export interface Props {
  title?: string;
  description?: string;
  keywords?: string;
  ogImage?: string;
  twitterImage?: string;
  canonical?: string;
  noindex?: boolean;
  nofollow?: boolean;
}

const {
  title = "ProfutbolJC - Alquiler Canchas de F√∫tbol en Tenjo | Cerca de Bogot√°, Cota y Ch√≠a",
  description = "Alquila las mejores canchas de f√∫tbol en Tenjo. C√©sped natural profesional, fotograf√≠a deportiva y torneos. Ideal para equipos de Bogot√°, Cota, Ch√≠a y la Sabana. ¬°Reserva ya! üìû+57 320 345 9145",
  keywords = "canchas f√∫tbol Tenjo, alquiler canchas Bogot√°, f√∫tbol Cota, canchas Ch√≠a, c√©sped natural, torneos f√∫tbol, fotograf√≠a deportiva, complejo deportivo Sabana Bogot√°",
  ogImage = "/images/og-image.jpg",
  twitterImage = "/images/twitter-card.jpg",
  canonical,
  noindex = false,
  nofollow = false,
} = Astro.props;

const canonicalURL = canonical || new URL(Astro.url.pathname, Astro.site).href;
const currentYear = new Date().getFullYear();
const robotsContent = `${noindex ? 'noindex' : 'index'}, ${nofollow ? 'nofollow' : 'follow'}, max-image-preview:large, max-snippet:-1, max-video-preview:-1`;
---

<!doctype html>
<html lang="es" class="scroll-smooth" prefix="og: https://ogp.me/ns#">
  <head>
    <!-- Charset y Viewport -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="theme-color" content="#FDB813" />
    <meta name="generator" content={Astro.generator} />

    <!-- Preconnect para optimizar carga -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" />
    <link rel="dns-prefetch" href="https://www.google-analytics.com" />

    <!-- SEO Principal -->
    <title>{title}</title>
    <meta name="description" content={description} />
    <meta name="keywords" content={keywords} />
    <meta name="author" content="Profutbol JC" />
    <meta name="copyright" content={`¬© ${currentYear} Profutbol JC. Todos los derechos reservados.`} />
    <meta name="robots" content={robotsContent} />
    <link rel="canonical" href={canonicalURL} />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="business.business" />
    <meta property="og:site_name" content="Profutbol JC" />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:url" content={canonicalURL} />
    <meta property="og:image" content={new URL(ogImage, Astro.site)} />
    <meta property="og:image:alt" content="Canchas de f√∫tbol profesionales en Profutbol JC, Tenjo" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:locale" content="es_CO" />
    <meta property="business:contact_data:street_address" content="Kil√≥metro 3 v√≠a Siberia" />
    <meta property="business:contact_data:locality" content="Tenjo" />
    <meta property="business:contact_data:region" content="Cundinamarca" />
    <meta property="business:contact_data:postal_code" content="251050" />
    <meta property="business:contact_data:country_name" content="Colombia" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@profutboljc" />
    <meta name="twitter:creator" content="@profutboljc" />
    <meta name="twitter:title" content={title} />
    <meta name="twitter:description" content={description} />
    <meta name="twitter:image" content={new URL(twitterImage, Astro.site)} />
    <meta name="twitter:image:alt" content="Vista a√©rea de las canchas de f√∫tbol en Profutbol JC" />

    <!-- Favicons -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="manifest" href="/site.webmanifest" />
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#fdb813" />
    <meta name="msapplication-TileColor" content="#fdb813" />

    <!-- Schema.org JSON-LD -->
    <script type="application/ld+json" set:html={JSON.stringify({
      "@context": "https://schema.org",
      "@type": ["SportsActivityLocation", "LocalBusiness", "Place"],
      "name": "Profutbol JC",
      "alternateName": "Profutbol JC Tenjo",
      "description": "El mejor complejo deportivo para alquilar canchas de f√∫tbol profesionales en Tenjo, ideal para equipos de Bogot√°, Cota, Ch√≠a y toda la Sabana de Bogot√°.",
      "url": "https://www.profutboljc.com",
      "logo": "https://www.profutboljc.com/images/profutbol-logo.png",
      "image": [
        "https://www.profutboljc.com/images/1.png",
        "https://www.profutboljc.com/images/2.png",
        "https://www.profutboljc.com/images/0.png"
      ],
      "telephone": "+573203459145",
      "email": "profutboljc@gmail.com",
      "address": {
        "@type": "PostalAddress",
        "streetAddress": "Kil√≥metro 3 v√≠a Siberia",
        "addressLocality": "Tenjo",
        "addressRegion": "Cundinamarca",
        "postalCode": "251050",
        "addressCountry": "CO"
      },
      "geo": {
        "@type": "GeoCoordinates",
        "latitude": "4.791184795184198",
        "longitude": "-74.15509402526055"
      },
      "openingHours": "Mo-Su 06:00-22:00",
      "priceRange": "$",
      "paymentAccepted": "Cash, Credit Card",
      "currenciesAccepted": "COP",
      "amenityFeature": [
        {
          "@type": "LocationFeatureSpecification",
          "name": "Parking",
          "value": true
        },
        {
          "@type": "LocationFeatureSpecification", 
          "name": "Changing Rooms",
          "value": true
        },
        {
          "@type": "LocationFeatureSpecification",
          "name": "Natural Grass Fields",
          "value": true
        }
      ],
      "sport": "Soccer",
      "areaServed": ["Tenjo", "Bogot√°", "Cota", "Ch√≠a", "Funza", "Mosquera", "Tabio"],
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "4.9",
        "ratingCount": "127",
        "bestRating": "5",
        "worstRating": "1"
      },
      "sameAs": [
        "https://www.facebook.com/p/Profutbol-JC-100083072811985/",
        "https://www.instagram.com/profutboljc/",
        "https://www.tiktok.com/@profutbol.jc"
      ]
    })} />

    <!-- Fonts con preload para performance -->
    <link
      rel="preload"
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap"
      as="style"
      onload="this.onload=null;this.rel='stylesheet'"
    />
    <noscript>
      <link
        href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap"
        rel="stylesheet"
      />
    </noscript>

    <!-- Font Awesome con preload -->
    <link 
      rel="preload" 
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" 
      as="style"
      onload="this.onload=null;this.rel='stylesheet'"
    />
    <noscript>
      <link 
        rel="stylesheet" 
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" 
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" 
        crossorigin="anonymous" 
        referrerpolicy="no-referrer"
      />
    </noscript>

    <!-- Material Icons (solo si es necesario) -->
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
      media="print"
      onload="this.media='all'"
    />

    <!-- Estilos globales optimizados -->
    <style is:global>
      /* ==============================================
         RESET Y BASE
      ============================================== */
      *,
      *::before,
      *::after {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      html {
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        text-rendering: optimizeLegibility;
        scroll-behavior: smooth;
      }

      body {
        font-family: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        line-height: 1.6;
        overflow-x: hidden;
        min-height: 100vh;
        position: relative;
      }

      /* Mejora de accesibilidad para usuarios con motion reducido */
      @media (prefers-reduced-motion: reduce) {
        *,
        *::before,
        *::after {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
          scroll-behavior: auto !important;
        }
      }

      /* ==============================================
         ANIMACIONES
      ============================================== */
      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      @keyframes slideInUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes slideInDown {
        from {
          opacity: 0;
          transform: translateY(-30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes slideInLeft {
        from {
          opacity: 0;
          transform: translateX(-30px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      @keyframes slideInRight {
        from {
          opacity: 0;
          transform: translateX(30px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      @keyframes zoomIn {
        from {
          opacity: 0;
          transform: scale(0.95);
        }
        to {
          opacity: 1;
          transform: scale(1);
        }
      }

      @keyframes pulse {
        0%, 100% {
          opacity: 1;
        }
        50% {
          opacity: 0.8;
        }
      }

      /* ==============================================
         VARIABLES CSS
      ============================================== */
      :root {
        /* Colores principales */
        --primary-color: #FDB813;
        --secondary-color: #262386;
        --dark-bg: #1a1a1a;
        --light-bg: #f8f9fa;
        --white: #ffffff;
        --text-dark: #333333;
        --text-light: #666666;
        --text-muted: #999999;
        
        /* Sombras */
        --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.1);
        --shadow-md: 0 4px 20px rgba(0, 0, 0, 0.12);
        --shadow-lg: 0 8px 30px rgba(0, 0, 0, 0.15);
        
        /* Transiciones */
        --transition-fast: 0.2s ease;
        --transition-normal: 0.3s ease;
        --transition-slow: 0.5s ease;
        
        /* Espaciado */
        --spacing-xs: 0.5rem;
        --spacing-sm: 1rem;
        --spacing-md: 1.5rem;
        --spacing-lg: 2rem;
        --spacing-xl: 3rem;
        --spacing-2xl: 4rem;
      }

      /* ==============================================
         HERO BACKGROUND
      ============================================== */
      .hero-bg {
        background-image: url('/images/0.png');
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        position: relative;
      }

      /* Para pantallas m√°s grandes, usar attachment fixed */
      @media (min-width: 1024px) {
        .hero-bg {
          background-attachment: fixed;
        }
      }

      /* Overlay para mejorar legibilidad */
      .hero-bg::before {
        content: '';
        position: absolute;
        inset: 0;
        background: linear-gradient(135deg, rgba(0, 0, 0, 0.5) 0%, rgba(0, 0, 0, 0.3) 100%);
        pointer-events: none;
      }

      /* ==============================================
         NAVEGACI√ìN
      ============================================== */
      .nav-link {
        position: relative;
        display: inline-block;
      }

      .nav-link::after {
        content: "";
        position: absolute;
        width: 0;
        height: 2px;
        bottom: -4px;
        left: 50%;
        transform: translateX(-50%);
        background-color: var(--primary-color);
        transition: width var(--transition-normal);
      }

      .nav-link:hover::after,
      .nav-link:focus-visible::after {
        width: 100%;
      }

      /* ==============================================
         CLASES DE ANIMACI√ìN
      ============================================== */
      .animate-fade-in {
        animation: fadeIn 1s ease-out forwards;
      }

      .animate-slide-in-up {
        animation: slideInUp 0.8s ease-out forwards;
      }

      .animate-slide-in-down {
        animation: slideInDown 0.8s ease-out forwards;
      }

      .animate-slide-in-left {
        animation: slideInLeft 0.8s ease-out forwards;
      }

      .animate-slide-in-right {
        animation: slideInRight 0.8s ease-out forwards;
      }

      .animate-zoom-in {
        animation: zoomIn 0.8s ease-out forwards;
      }

      .animate-pulse {
        animation: pulse 2s ease-in-out infinite;
      }

      /* ==============================================
         UTILIDADES DE ACCESIBILIDAD
      ============================================== */
      /* Skip to main content link */
      .skip-to-content {
        position: absolute;
        top: -40px;
        left: 0;
        background: var(--primary-color);
        color: var(--white);
        padding: 8px 16px;
        text-decoration: none;
        font-weight: 600;
        z-index: 100;
        border-radius: 0 0 4px 0;
      }

      .skip-to-content:focus {
        top: 0;
      }

      /* Focus visible mejorado */
      *:focus-visible {
        outline: 3px solid var(--primary-color);
        outline-offset: 2px;
      }

      /* Ocultar visualmente pero mantener accesible */
      .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border-width: 0;
      }

      /* ==============================================
         IM√ÅGENES RESPONSIVE
      ============================================== */
      img {
        max-width: 100%;
        height: auto;
        display: block;
      }

      /* ==============================================
         SCROLL SUAVE PARA ANCLAS
      ============================================== */
      @media (prefers-reduced-motion: no-preference) {
        html {
          scroll-behavior: smooth;
        }
      }

      /* ==============================================
         CONTENEDORES RESPONSIVE
      ============================================== */
      .container-custom {
        width: 100%;
        max-width: 1280px;
        margin: 0 auto;
        padding: 0 1rem;
      }

      @media (min-width: 640px) {
        .container-custom {
          padding: 0 2rem;
        }
      }

      @media (min-width: 1024px) {
        .container-custom {
          padding: 0 3rem;
        }
      }

      /* ==============================================
         OPTIMIZACI√ìN DE PERFORMANCE
      ============================================== */
      /* Lazy loading para im√°genes */
      img[loading="lazy"] {
        opacity: 0;
        transition: opacity 0.3s;
      }

      img[loading="lazy"].loaded {
        opacity: 1;
      }

      /* ==============================================
         ALTO CONTRASTE
      ============================================== */
      @media (prefers-contrast: high) {
        :root {
          --primary-color: #F39C12;
          --text-dark: #000000;
          --text-light: #333333;
        }

        .nav-link::after {
          height: 3px;
        }

        button,
        a {
          outline: 2px solid currentColor;
          outline-offset: 2px;
        }
      }

      /* ==============================================
         MODO OSCURO (Opcional)
      ============================================== */
      @media (prefers-color-scheme: dark) {
        :root {
          --light-bg: #1a1a1a;
          --white: #0d1117;
          --text-dark: #e6e6e6;
          --text-light: #b3b3b3;
          --text-muted: #808080;
        }
      }

      /* ==============================================
         LOADING STATES
      ============================================== */
      .loading-skeleton {
        background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
        background-size: 200% 100%;
        animation: loading 1.5s infinite;
      }

      @keyframes loading {
        0% {
          background-position: 200% 0;
        }
        100% {
          background-position: -200% 0;
        }
      }

      /* ==============================================
         PRINT STYLES
      ============================================== */
      @media print {
        *,
        *::before,
        *::after {
          background: transparent !important;
          color: #000 !important;
          box-shadow: none !important;
          text-shadow: none !important;
        }

        a,
        a:visited {
          text-decoration: underline;
        }

        a[href]::after {
          content: " (" attr(href) ")";
        }

        img {
          page-break-inside: avoid;
        }

        h2,
        h3 {
          page-break-after: avoid;
        }
      }
    </style>
  </head>
  <body class="antialiased bg-white text-gray-900 transition-colors duration-300">
    <!-- Skip to main content link para accesibilidad -->
    <a href="#main-content" class="skip-to-content">
      Saltar al contenido principal
    </a>

    <!-- Main content -->
    <slot />

    <!-- Scripts de performance monitoring (opcional) -->
    <script is:inline>
      // Web Vitals monitoring
      if ('PerformanceObserver' in window) {
        // LCP - Largest Contentful Paint
        const lcpObserver = new PerformanceObserver((list) => {
          const entries = list.getEntries();
          const lastEntry = entries[entries.length - 1];
          console.log('LCP:', lastEntry.renderTime || lastEntry.loadTime);
        });
        
        try {
          lcpObserver.observe({ entryTypes: ['largest-contentful-paint'] });
        } catch (e) {
          console.warn('LCP observer not supported');
        }

        // CLS - Cumulative Layout Shift
        let clsValue = 0;
        const clsObserver = new PerformanceObserver((list) => {
          for (const entry of list.getEntries()) {
            if (!entry.hadRecentInput) {
              clsValue += entry.value;
              console.log('CLS:', clsValue);
            }
          }
        });

        try {
          clsObserver.observe({ entryTypes: ['layout-shift'] });
        } catch (e) {
          console.warn('CLS observer not supported');
        }
      }

      // Lazy loading images
      if ('IntersectionObserver' in window) {
        const imageObserver = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              const img = entry.target;
              img.classList.add('loaded');
              imageObserver.unobserve(img);
            }
          });
        });

        document.addEventListener('DOMContentLoaded', () => {
          document.querySelectorAll('img[loading="lazy"]').forEach(img => {
            imageObserver.observe(img);
          });
        });
      }
    </script>
  </body>
</html>