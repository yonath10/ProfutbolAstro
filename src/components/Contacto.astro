---
// Contact.astro
---

<section id="contacto" class="py-24 bg-primary-darker text-white">
    <div class="container mx-auto px-4 max-w-7xl">
        <!-- Header -->
        <header class="text-center mb-12 md:mb-16 max-w-3xl mx-auto">
            <h2 id="contact-heading" class="text-3xl md:text-4xl lg:text-5xl font-extrabold text-gray-900 mb-4">
                Contác<span class="text-yellow-500">tanos</span>
            </h2>
            <p class="text-base md:text-lg text-gray-600 leading-relaxed">
                ¿Listo para reservar tu cancha de fútbol en Tenjo? Contáctanos por cualquiera de nuestros medios 
                y asegura tu espacio en el mejor complejo deportivo de la Sabana de Bogotá.
            </p>
        </header>
        
        <!-- Contact Content Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 md:gap-8 mb-12 md:mb-16">
            <!-- Contact Info Cards -->
            <div class="space-y-5">
                <address class="not-italic space-y-5">
                    <!-- Location Card -->
                    <article class="bg-white rounded-xl p-6 md:p-8 shadow-md hover:shadow-xl transition-all duration-300 hover:-translate-y-1 border border-gray-100 flex items-start gap-5">
                        <div class="w-14 h-14 md:w-16 md:h-16 bg-gradient-to-br from-red-500 to-red-600 rounded-full flex items-center justify-center flex-shrink-0 transform transition-transform hover:scale-110 hover:rotate-6" aria-hidden="true">
                            <i class="fas fa-map-marker-alt text-white text-xl md:text-2xl"></i>
                        </div>
                        <div class="flex-1">
                            <h3 class="text-lg md:text-xl font-bold text-gray-900 mb-2">Nuestra Ubicación</h3>
                            <p class="text-gray-600 leading-relaxed">
                                <span class="block">Kilómetro 3 vía Siberia</span>
                                <span class="block">Tenjo, Cundinamarca</span>
                                <span class="block">Colombia</span>
                            </p>
                        </div>
                    </article>

                    <!-- Phone Card -->
                    <article class="bg-white rounded-xl p-6 md:p-8 shadow-md hover:shadow-xl transition-all duration-300 hover:-translate-y-1 border border-gray-100 flex items-start gap-5">
                        <div class="w-14 h-14 md:w-16 md:h-16 bg-gradient-to-br from-green-500 to-green-600 rounded-full flex items-center justify-center flex-shrink-0 transform transition-transform hover:scale-110 hover:rotate-6" aria-hidden="true">
                            <i class="fas fa-phone text-white text-xl md:text-2xl"></i>
                        </div>
                        <div class="flex-1">
                            <h3 class="text-lg md:text-xl font-bold text-gray-900 mb-2">Teléfono y WhatsApp</h3>
                            <p class="text-gray-600">
                                <a href="tel:+573203459145" class="text-yellow-500 hover:text-yellow-600 font-semibold hover:underline transition-colors">
                                    +57 320 345 9145
                                </a>
                                <small class="block mt-1 text-sm text-gray-500">Llámanos o escríbenos por WhatsApp - Disponible 24/7</small>
                            </p>
                        </div>
                    </article>

                    <!-- Email Card -->
                    <article class="bg-white rounded-xl p-6 md:p-8 shadow-md hover:shadow-xl transition-all duration-300 hover:-translate-y-1 border border-gray-100 flex items-start gap-5">
                        <div class="w-14 h-14 md:w-16 md:h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center flex-shrink-0 transform transition-transform hover:scale-110 hover:rotate-6" aria-hidden="true">
                            <i class="fas fa-envelope text-white text-xl md:text-2xl"></i>
                        </div>
                        <div class="flex-1">
                            <h3 class="text-lg md:text-xl font-bold text-gray-900 mb-2">Correo Electrónico</h3>
                            <p class="text-gray-600">
                                <a href="mailto:profutboljc@gmail.com" class="text-yellow-500 hover:text-yellow-600 font-semibold hover:underline transition-colors break-all">
                                    profutboljc@gmail.com
                                </a>
                                <small class="block mt-1 text-sm text-gray-500">Respuesta garantizada en menos de 2 horas</small>
                            </p>
                        </div>
                    </article>
                </address>
            </div>

            <!-- Location Map -->
            <div class="h-full min-h-[400px] lg:min-h-0">
                <div class="bg-white rounded-xl p-6 md:p-8 shadow-md hover:shadow-xl transition-shadow duration-300 border border-gray-100 h-full">
                    <h3 class="text-xl md:text-2xl font-bold text-gray-900 text-center mb-5">Nuestra Ubicación Exacta</h3>
                    <div class="relative w-full h-[300px] md:h-[400px] lg:h-[calc(100%-3rem)] rounded-lg overflow-hidden shadow-md">
                        <iframe
                            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3975.876784587608!2d-74.15509402526055!3d4.791184795184198!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8e3f87cb14f2a6b7%3A0xcf52010d5bae4e76!2sProfutbol%20JC!5e0!3m2!1ses!2ses!4v1757202655196!5m2!1ses!2ses"
                            class="absolute inset-0 w-full h-full border-0"
                            allowfullscreen="" 
                            loading="lazy"
                            referrerpolicy="no-referrer-when-downgrade"
                            title="Mapa de ubicación de Profutbol JC en Tenjo, Cundinamarca"
                            aria-label="Mapa interactivo mostrando la ubicación exacta de Profutbol JC">
                        </iframe>
                    </div>
                </div>
            </div>
        </div>

        <!-- Contact Form -->
        <div class="max-w-4xl mx-auto">
            <div class="bg-white rounded-xl p-6 md:p-10 lg:p-12 shadow-xl border border-gray-100">
                <h3 class="text-2xl md:text-3xl font-bold text-gray-900 text-center mb-8">Envíanos un Mensaje Directo</h3>
                
                <form 
                    action="https://formspree.io/f/mjkonvjj" 
                    method="POST" 
                    novalidate 
                    class="space-y-6"
                    aria-labelledby="form-heading">
                    
                    <!-- Name and Email Row -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Name Input -->
                        <div class="form-group">
                            <label for="contact-name" class="block text-sm font-semibold text-gray-700 mb-2">
                                Nombre Completo <span class="text-red-500">*</span>
                            </label>
                            <input 
                                type="text" 
                                id="contact-name"
                                name="name" 
                                class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-yellow-500 focus:ring-4 focus:ring-yellow-500/10 transition-all duration-200 outline-none"
                                placeholder="Tu nombre completo" 
                                required 
                                aria-required="true"
                                autocomplete="name">
                        </div>
                        
                        <!-- Email Input -->
                        <div class="form-group">
                            <label for="contact-email" class="block text-sm font-semibold text-gray-700 mb-2">
                                Correo Electrónico <span class="text-red-500">*</span>
                            </label>
                            <input 
                                type="email" 
                                id="contact-email"
                                name="_replyto" 
                                class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-yellow-500 focus:ring-4 focus:ring-yellow-500/10 transition-all duration-200 outline-none"
                                placeholder="tu@email.com" 
                                required 
                                aria-required="true"
                                autocomplete="email">
                        </div>
                    </div>
                    
                    <!-- Phone Input -->
                    <div class="form-group">
                        <label for="contact-phone" class="block text-sm font-semibold text-gray-700 mb-2">
                            Teléfono <span class="text-gray-400">(opcional)</span>
                        </label>
                        <input 
                            type="tel" 
                            id="contact-phone"
                            name="phone" 
                            class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-yellow-500 focus:ring-4 focus:ring-yellow-500/10 transition-all duration-200 outline-none"
                            placeholder="Tu número de teléfono" 
                            autocomplete="tel">
                    </div>
                    
                    <!-- Message Textarea -->
                    <div class="form-group">
                        <label for="contact-message" class="block text-sm font-semibold text-gray-700 mb-2">
                            Tu mensaje <span class="text-red-500">*</span>
                        </label>
                        <textarea 
                            id="contact-message"
                            name="message" 
                            rows="5" 
                            class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-yellow-500 focus:ring-4 focus:ring-yellow-500/10 transition-all duration-200 outline-none resize-y min-h-[120px]"
                            placeholder="Cuéntanos qué necesitas: reserva de cancha, información sobre torneos, fotografía deportiva..." 
                            required 
                            aria-required="true"></textarea>
                    </div>
                    
                    <!-- Honeypot -->
                    <input type="text" name="_gotcha" class="hidden" tabindex="-1" autocomplete="off">
                    
                    <!-- Submit Button -->
                    <button 
                        type="submit" 
                        class="w-full bg-gradient-to-r from-yellow-400 to-yellow-500 hover:from-yellow-500 hover:to-yellow-600 text-white font-bold py-4 px-6 rounded-lg shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-200 flex items-center justify-center gap-3 group relative overflow-hidden">
                        <span class="relative z-10 flex items-center gap-3 button-text">
                            <i class="fas fa-paper-plane" aria-hidden="true"></i>
                            Enviar Mensaje Ahora
                        </span>
                        <span class="hidden items-center gap-3 loading-text">
                            <i class="fas fa-spinner fa-spin" aria-hidden="true"></i>
                            Enviando...
                        </span>
                        <!-- Shine effect -->
                        <span class="absolute inset-0 w-full h-full bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-700"></span>
                    </button>
                    
                    <!-- Form Note -->
                    <p class="text-center text-sm text-gray-500 mt-4">
                        <span class="text-red-500">*</span> Campos obligatorios. Responderemos en menos de 2 horas.
                    </p>
                </form>
            </div>
        </div>
    </div>
</section>

<script>
    // Manejo del formulario
    document.addEventListener('DOMContentLoaded', () => {
        const form = document.querySelector('form[action*="formspree"]') as HTMLFormElement;
        
        if (form) {
            form.addEventListener('submit', async (e) => {
                const submitBtn = form.querySelector('button[type="submit"]') as HTMLButtonElement;
                const buttonText = submitBtn?.querySelector('.button-text');
                const loadingText = submitBtn?.querySelector('.loading-text');
                
                if (submitBtn && buttonText && loadingText) {
                    submitBtn.disabled = true;
                    buttonText.classList.add('hidden');
                    loadingText.classList.remove('hidden');
                    loadingText.classList.add('flex');
                }
                
                // Re-habilitar después de 3 segundos
                setTimeout(() => {
                    if (submitBtn && buttonText && loadingText) {
                        submitBtn.disabled = false;
                        buttonText.classList.remove('hidden');
                        loadingText.classList.add('hidden');
                        loadingText.classList.remove('flex');
                    }
                }, 3000);
            });

            // Validación en tiempo real
            const inputs = form.querySelectorAll('input[required], textarea[required]');
            inputs.forEach(input => {
                input.addEventListener('blur', (e) => {
                    const target = e.target as HTMLInputElement | HTMLTextAreaElement;
                    if (!target.value.trim()) {
                        target.classList.remove('border-gray-200');
                        target.classList.add('border-red-500');
                    } else {
                        target.classList.remove('border-red-500');
                        target.classList.add('border-gray-200');
                    }
                });

                input.addEventListener('input', (e) => {
                    const target = e.target as HTMLInputElement | HTMLTextAreaElement;
                    if (target.classList.contains('border-red-500') && target.value.trim()) {
                        target.classList.remove('border-red-500');
                        target.classList.add('border-gray-200');
                    }
                });
            });

            // Validación de email
            const emailInput = form.querySelector('input[type="email"]') as HTMLInputElement;
            if (emailInput) {
                emailInput.addEventListener('blur', () => {
                    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                    if (emailInput.value && !emailRegex.test(emailInput.value)) {
                        emailInput.classList.remove('border-gray-200');
                        emailInput.classList.add('border-red-500');
                    }
                });
            }
        }
    });

    // Animaciones suaves al hacer scroll
    if ('IntersectionObserver' in window) {
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('animate-fade-in');
                }
            });
        }, { threshold: 0.1 });

        document.querySelectorAll('.form-group').forEach(el => {
            observer.observe(el);
        });
    }
</script>

<style>
    /* Animación fade-in */
    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .animate-fade-in {
        animation: fadeIn 0.6s ease-out forwards;
    }

    /* Accesibilidad - Motion reducido */
    @media (prefers-reduced-motion: reduce) {
        * {
            animation-duration: 0.01ms !important;
            animation-iteration-count: 1 !important;
            transition-duration: 0.01ms !important;
        }
    }

    /* Mejora de contraste para accesibilidad */
    @media (prefers-contrast: high) {
        input, textarea {
            border-width: 3px;
        }
    }
</style>