---
// src/components/Header.astro
const { pathname } = Astro.url;
const isHomePage = pathname === '/';

const navLinks = [
  { href: '#  ', label: 'Inicio' },
  { href: '#servicios', label: 'Servicios' },
  { href: '#torneos', label: 'Torneos' },
  { href: '#nosotros', label: 'Nosotros' },
  { href: '#contacto', label: 'Contacto' },
];

const socialLinks = [
    { href: "https://www.facebook.com/p/Profutbol-JC-100083072811985/", icon: "fab fa-facebook-f", label: "Facebook"},
    { href: "https://www.instagram.com/profutboljc/", icon: "fab fa-instagram", label: "Instagram"},
    { href: "https://www.tiktok.com/@profutbol.jc", icon: "fab fa-tiktok", label: "TikTok"}
];

// Función para generar los Hrefs correctos
const getLink = (href: string) => {
    if (isHomePage) {
        return href; // Mantiene #inicio, #servicios, etc.
    }
    // Si no es la home, construye la URL completa
    if (href === '#inicio') return '/';
    return `/${href}`; // Devuelve /#servicios, /#nosotros, etc.
}
---

<header 
  id="header" 
  class="fixed top-0 left-0 right-0 z-50 transition-all duration-300 bg-white/80 backdrop-blur-lg shadow-sm" 
  role="banner">
  <nav 
    class="container mx-auto px-4 lg:px-6" 
    role="navigation" 
    aria-label="Navegación principal">
    
    <div class="relative flex items-center justify-between h-20 lg:h-24">

      <div class="hidden lg:flex items-center gap-4">
        {socialLinks.map(link => (
          <a href={link.href} target="_blank" rel="noopener noreferrer" aria-label={`Síguenos en ${link.label}`} class="text-gray-600 hover:text-yellow-500 transition-colors">
            <i class={link.icon} aria-hidden="true"></i>
          </a>
        ))}
      </div>

      <div class="flex-1 lg:absolute lg:left-1/2 lg:-translate-x-1/2 lg:flex-none">
        <a 
          href="/" 
          class="inline-flex items-center gap-3 group focus:outline-none focus-visible:ring-2 focus-visible:ring-yellow-500 focus-visible:ring-offset-2 rounded-lg px-2 py-1 transition-transform hover:scale-105"
          aria-label="Profutbol JC - Página de inicio">
          <img 
            src="/images/profutbol.png" 
            alt="Logo de Profutbol JC" 
            width="45" 
            height="45" 
            class="h-10 w-10 lg:h-12 lg:w-12 transition-transform group-hover:rotate-6"
            loading="eager">
          
          <span class="text-lg lg:text-xl font-bold text-gray-900 tracking-tight group-hover:text-yellow-500 transition-colors">
            PROFUTBOL JC
          </span>
        </a>
      </div>

      <div class="hidden lg:flex items-center gap-2">
        <ul class="flex items-center gap-1" role="menubar">
          {navLinks.map((link) => (
            <li role="none">
              <a 
                href={getLink(link.href)}
                role="menuitem"
                class="nav-link px-4 py-2 text-sm font-semibold text-gray-700 hover:text-yellow-500 rounded-lg transition-colors duration-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-yellow-500 focus-visible:ring-offset-2">
                {link.label}
              </a>
            </li>
          ))}
        </ul>

        <a 
          href="https://wa.me/573203459145" 
          target="_blank" 
          rel="noopener noreferrer"
          class="ml-4 px-5 py-2 text-sm font-bold border-2 border-gray-900 text-gray-900 rounded-md hover:bg-yellow-500 hover:text-white hover:border-yellow-500 transition-all duration-300 transform hover:scale-105 focus:outline-none focus-visible:ring-2 focus-visible:ring-yellow-500 focus-visible:ring-offset-2"
          aria-label="Reservar una cancha por WhatsApp - Abre en nueva ventana">
          Reservar
        </a>
      </div>

      <button 
        type="button"
        id="mobile-menu-button"
        class="lg:hidden flex items-center justify-center w-10 h-10 rounded-lg border-2 border-yellow-500 text-gray-900 hover:bg-yellow-50 transition-colors focus:outline-none focus-visible:ring-2 focus-visible:ring-yellow-500 focus-visible:ring-offset-2"
        aria-controls="mobile-menu"
        aria-expanded="false"
        aria-label="Abrir menú de navegación">
        <svg 
          class="hamburger w-6 h-6 transition-transform duration-300" 
          fill="none" 
          stroke="currentColor" 
          viewBox="0 0 24 24"
          aria-hidden="true">
          <path 
            class="line-1" 
            stroke-linecap="round" 
            stroke-linejoin="round" 
            stroke-width="2" 
            d="M4 6h16" />
          <path 
            class="line-2" 
            stroke-linecap="round" 
            stroke-linejoin="round" 
            stroke-width="2" 
            d="M4 12h16" />
          <path 
            class="line-3" 
            stroke-linecap="round" 
            stroke-linejoin="round" 
            stroke-width="2" 
            d="M4 18h16" />
        </svg>
      </button>
    </div>

    <div 
      id="mobile-menu"
      class="lg:hidden overflow-hidden transition-all duration-300 ease-in-out max-h-0"
      aria-labelledby="mobile-menu-title">
      
      <div class="py-4 border-t border-gray-100">
        <h2 id="mobile-menu-title" class="sr-only">Menú de navegación</h2>
        
        <ul class="flex flex-col gap-2" role="menubar">
          {navLinks.map((link) => (
            <li role="none">
              <a 
                href={getLink(link.href)}
                role="menuitem"
                class="mobile-nav-link flex items-center justify-center px-4 py-3 text-base font-semibold text-gray-700 hover:text-yellow-500 hover:bg-yellow-50 rounded-lg transition-all duration-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-yellow-500 focus-visible:ring-inset transform hover:scale-[1.02]">
                {link.label}
              </a>
            </li>
          ))}
        </ul>

        <div class="mt-4 pt-4 border-t border-gray-100">
          <a 
            href="https://wa.me/573203459145" 
            target="_blank" 
            rel="noopener noreferrer"
            class="flex items-center justify-center gap-3 w-full px-6 py-4 bg-gradient-to-r from-yellow-400 to-yellow-500 hover:from-yellow-500 hover:to-yellow-600 text-gray-900 font-bold rounded-lg shadow-md hover:shadow-lg transform hover:scale-[1.02] transition-all duration-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-yellow-500 focus-visible:ring-offset-2"
            aria-label="Contactar por WhatsApp - Abre en nueva ventana">
            <i class="fab fa-whatsapp text-2xl" aria-hidden="true"></i>
            <span>Contáctanos por WhatsApp</span>
          </a>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="h-20 lg:h-24" aria-hidden="true"></div>

<script>
  // Mobile menu toggle
  const mobileMenuButton = document.getElementById('mobile-menu-button');
  const mobileMenu = document.getElementById('mobile-menu');
  
  if (mobileMenuButton && mobileMenu) {
    mobileMenuButton.addEventListener('click', () => {
      const isExpanded = mobileMenuButton.getAttribute('aria-expanded') === 'true';
      mobileMenuButton.setAttribute('aria-expanded', String(!isExpanded));
      if (isExpanded) {
        mobileMenu.style.maxHeight = '0px';
      } else {
        mobileMenu.style.maxHeight = mobileMenu.scrollHeight + 'px';
      }
    });
  }
</script>